{"version":3,"sources":["../../../src/public/js/templates.js"],"names":["templates","savedTemplates","getAbsolutePath","window","location","protocol","host","pathname","httpGet","path","onSuccess","onError","request","XMLHttpRequest","url","open","onload","status","response","onerror","send","saveTemplate","template","getSavedTemplate","key","toNode","container","document","createElement","innerHTML","children","loadTemplate","callback","hasOwnProperty","load"],"mappings":";;AAAA,IAAIA,YAAa,YAAY;AAC3B,MAAIC,iBAAiB,EAArB;;AAEA,WAASC,eAAT,GAA2B;AACzB,WAAOC,OAAOC,QAAP,CAAgBC,QAAhB,GAA2B,IAA3B,GAAkCF,OAAOC,QAAP,CAAgBE,IAAlD,GAAyDH,OAAOC,QAAP,CAAgBG,QAAhF;AACD;;AAED,WAASC,OAAT,CAAiBC,IAAjB,EAAuBC,SAAvB,EAAkCC,OAAlC,EAA2C;AACzC,QAAIC,UAAU,IAAIC,cAAJ,EAAd;AACA,QAAIC,MAAMZ,oBAAoBO,IAA9B;;AAEAG,YAAQG,IAAR,CAAa,KAAb,EAAoBD,GAApB,EAAyB,IAAzB;;AAEAF,YAAQI,MAAR,GAAiB,YAAY;AAC3B,UAAI,KAAKC,MAAL,IAAe,GAAf,IAAsB,KAAKA,MAAL,GAAc,GAAxC,EAA6C;AAC3CP,kBAAU,KAAKQ,QAAf;AACD,OAFD,MAEO;AACLP,gBAAQ,wDAAR;AACD;AACF,KAND;;AAQAC,YAAQO,OAAR,GAAkB,YAAY;AAC5BR,cAAQ,2CAAR;AACD,KAFD;;AAIAC,YAAQQ,IAAR;AACD;;AAED,WAASC,YAAT,CAAsBZ,IAAtB,EAA4Ba,QAA5B,EAAsC;AACpCrB,mBAAeQ,IAAf,IAAuBa,QAAvB;AACD;;AAED,WAASC,gBAAT,CAA0BC,GAA1B,EAA+B;AAC7B,WAAOC,OAAOxB,eAAeuB,GAAf,CAAP,CAAP;AACD;;AAED,WAASC,MAAT,CAAgBH,QAAhB,EAA0B;AACxB,QAAII,YAAYC,SAASC,aAAT,CAAuB,KAAvB,CAAhB;AACAF,cAAUG,SAAV,GAAsBP,QAAtB;AACA,WAAOI,UAAUI,QAAV,CAAmB,CAAnB,CAAP;AACD;;AAED,WAASC,YAAT,CAAsBtB,IAAtB,EAA4BuB,QAA5B,EAAsC;;AAEpC,QAAI/B,eAAegC,cAAf,CAA8BxB,IAA9B,CAAJ,EAAyC;AACvCuB,eAAST,iBAAiBd,IAAjB,CAAT;;AAEA;AACD;;AAEDD,YAAQC,IAAR,EAAc,UAAUa,QAAV,EAAoB;AAChCD,mBAAaZ,IAAb,EAAmBa,QAAnB;AACAU,eAAST,iBAAiBd,IAAjB,CAAT;AACD,KAHD;AAID;;AAED,SAAO;AACLyB,UAAMH;AADD,GAAP;AAGD,CA3DgB,EAAjB","file":"templates.js","sourcesContent":["var templates = (function () {\n  var savedTemplates = {};\n\n  function getAbsolutePath() {\n    return window.location.protocol + '//' + window.location.host + window.location.pathname;\n  }\n\n  function httpGet(path, onSuccess, onError) {\n    var request = new XMLHttpRequest();\n    var url = getAbsolutePath() + path;\n\n    request.open('GET', url, true);\n\n    request.onload = function () {\n      if (this.status >= 200 && this.status < 400) {\n        onSuccess(this.response);\n      } else {\n        onError('We reached our target server, but it returned an error');\n      }\n    };\n\n    request.onerror = function () {\n      onError('There was a connection error of some sort');\n    };\n\n    request.send();\n  }\n\n  function saveTemplate(path, template) {\n    savedTemplates[path] = template;\n  }\n\n  function getSavedTemplate(key) {\n    return toNode(savedTemplates[key]);\n  }\n\n  function toNode(template) {\n    var container = document.createElement('div');\n    container.innerHTML = template;\n    return container.children[0];\n  }\n\n  function loadTemplate(path, callback) {\n\n    if (savedTemplates.hasOwnProperty(path)) {\n      callback(getSavedTemplate(path));\n\n      return;\n    }\n\n    httpGet(path, function (template) {\n      saveTemplate(path, template);\n      callback(getSavedTemplate(path));\n    });\n  }\n\n  return {\n    load: loadTemplate\n  };\n}());\n"]}